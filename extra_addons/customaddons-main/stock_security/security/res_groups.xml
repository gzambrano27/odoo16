<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="res.groups" id="group_product_restrict">
        <field name="name">Restrict Product Creation</field>
    </record>

    <record id="group_restrict_warehouse" model="res.groups">
        <field name="name">Restrict Stock Warehouses</field>
    </record>

    <record id="filter_user_stock_warehouse_allowed_new" model="ir.rule">
        <field name="name">Filter Stock Warehouse Allowed new</field>
        <field name="model_id" search="[('model','=','stock.warehouse')]" model="ir.model"/>
        <field name="groups" eval="[(4, ref('group_restrict_warehouse'))]"/>
        <field name="domain_force">['|', ('id','in', user.default_warehouse_ids.ids), (user.all_warehouse, '=', True)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="filter_user_stock_picking_type_allowed_new" model="ir.rule">
        <field name="name">Filter Stock Picking Type Allowed new</field>
        <field name="model_id" search="[('model','=','stock.picking.type')]" model="ir.model"/>
        <field name="groups" eval="[(4, ref('group_restrict_warehouse'))]"/>
        <field name="domain_force">['|', ('id','in', user.default_picking_type_ids.ids), (user.all_warehouse, '=', True)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="filter_user_stock_picking_allowed_new" model="ir.rule">
        <field name="name">Filter Stock Picking Allowed new</field>
        <field name="model_id" search="[('model','=','stock.picking')]" model="ir.model"/>
        <field name="groups" eval="[(4, ref('group_restrict_warehouse'))]"/>
        <field name="domain_force">['|', ('picking_type_id','in', user.default_picking_type_ids.ids), (user.all_warehouse, '=', True)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="filter_user_stock_move_allowed_new" model="ir.rule">
        <field name="name">Filter Stock Move Allowed new</field>
        <field name="model_id" search="[('model','=','stock.move')]" model="ir.model"/>
        <field name="groups" eval="[(4, ref('group_restrict_warehouse'))]"/>
        <field name="domain_force">['|', ('picking_type_id','in', user.default_picking_type_ids.ids), (user.all_warehouse, '=', True)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

</odoo>
