<?xml version="1.0" ?>
<odoo>
	<data>


	<record id="view_hr_mail_message_tree" model="ir.ui.view">
    <field name="name">hr.mail.message.tree</field>
    <field name="model">hr.mail.message</field>
    <field name="arch" type="xml">
        <tree string="Mensajes de Nómina" edit="false" delete="false" create="false"
        decoration-info="state=='draft'"
              decoration-success="state=='sended'"
              decoration-danger="state=='error'"
        decoration-muted="state=='annulled'"
        >
             <field name="company_id" />
    	    <field name="internal_type" />
    	                        <field name="create_date" string="Fecha de Creacion" />

            <field name="name"/>
            <field name="type"/>
            <field name="internal_id"/>
            <field name="model_name"/>
            <field name="description"/>
            <field name="email"/>
            <field name="last_message_date"/>
            <field name="state"/>
        </tree>
    </field>
</record>


<record id="view_hr_mail_message_form" model="ir.ui.view">
    <field name="name">hr.mail.message.form</field>
    <field name="model">hr.mail.message</field>
    <field name="arch" type="xml">
        <form string="Mensaje de Nómina" edit="false" delete="false" create="false">
         <header>
                  <button string="Enviar" name="send_mail" type="object" icon="fa-envelope" attrs="{'invisible':[('state','not in',('draft','error'))]}" />
                  <button string="Anular" name="action_cancel" type="object" icon="fa-times" attrs="{'invisible':[('state','not in',('draft','error'))]}" />
             <field name="state" widget="statusbar" />
            </header>
            <sheet>

                <group>
                <group>
                    <field name="company_id" readonly="1" colspan="2" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                	<field name="internal_type" readonly="1" colspan="2"/>
                    <field name="type" readonly="1" colspan="2"/>

                    <field name="description" readonly="1" colspan="2"/>
                     <field name="employee_id" colspan="2" readonly="1"  options="{'no_create':True,'no_edit':True,'no_open':True}"/>


                    <field name="email" readonly="0" colspan="2" required="0" />

                </group>
                <group>
                    <field name="create_date" string="Fecha de Creacion" readonly="1" colspan="2"/>
                                    <field name="name" readonly="1" colspan="2"/>

                <field name="internal_id" readonly="1" colspan="2"/>
                    <field name="model_name" readonly="1" colspan="2"/>

                    <field name="last_message_email" readonly="1" colspan="2"/>
                    <field name="last_message_date" readonly="1" colspan="2"/>

                    <field name="message_id" colspan="2" readonly="1"  options="{'no_create':True,'no_edit':True}"/>

                </group>

                    </group>
            </sheet>
        </form>
    </field>
</record>


<record id="view_hr_mail_message_search" model="ir.ui.view">
    <field name="name">hr.mail.message.search</field>
    <field name="model">hr.mail.message</field>
    <field name="arch" type="xml">
        <search string="Buscar Mensajes de Nomina">
            <field name="name" string="PK"/>
            <field name="type" string="Tipo"/>
            <field name="model_name" string="Modelo"/>
            <field name="email" string="Correo"/>
            <field name="last_message_date" string="Últ. Fecha Envio"/>
            <filter string="Borrador" domain="[('state', '=', 'draft')]" name="filter_draft"/>
            <filter string="Enviado" domain="[('state', '=', 'send')]" name="filter_send"/>
            <filter string="Error" domain="[('state', '=', 'error')]" name="filter_error"/>
            <filter string="Anulado" domain="[('state', '=', 'annulled')]" name="filter_annulled"/>
            <newline/>
            <filter string="Tipo Envio" context="{'group_by':'internal_type'}" name="grp_internal_type"/>
            <filter string="Fecha" context="{'group_by':'create_date'}" name="grp_create_date"/>
            <filter string="Empleado" context="{'group_by':'employee_id'}" name="grp_employee_id"/>
            <field name="employee_id" />
            <field name="email" />
            <field name="name" />
        </search>
    </field>
</record>

<record id="action_hr_mail_message_payslip" model="ir.actions.act_window">
    <field name="name">Mensajes de Nómina</field>
    <field name="res_model">hr.mail.message</field>
    <field name="view_mode">tree,form</field>
    <field name="view_id" ref="view_hr_mail_message_tree"/>
    <field name="context">{}</field>
    <field name="domain">[('type','=','payslip')]</field>
</record>









	</data>


	</odoo>