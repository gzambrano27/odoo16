<?xml version="1.0" encoding="utf-8"?>
<odoo>


	<record id="account_fiscal_year_tree_view" model="ir.ui.view">
		<field name="name">account.fiscal.year.tree.invoice.view</field>
		<field name="model">account.fiscal.year</field>
		<field name="inherit_id"
			ref="account_accountant.action_account_fiscal_year_tree" />
		<field name="arch" type="xml">

			<field name="date_to" position="after">
				<field name="state" />

			</field>
			<xpath expr="/tree" position="attributes">
				<attribute name="decoration-info">state=="draft"</attribute>
				<attribute name="decoration-success">state=="closed"</attribute>
				<attribute name="decoration-danger">state=="open"</attribute>

			</xpath>

		</field>

	</record>

	<record id="account_fiscal_year_form_view" model="ir.ui.view">
		<field name="name">account.fiscal.year.form.invoice.view</field>
		<field name="model">account.fiscal.year</field>
		<field name="inherit_id"
			ref="account_accountant.action_account_fiscal_year_form" />
		<field name="arch" type="xml">

			<field name="company_id" position="attributes">
				<attribute name="options">
					{'no_create':True,'no_open':True,'no_edit':True}
				</attribute>
				<attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
			</field>

			<field name="name" position="attributes">
				<attribute name="invisible">1</attribute>
			</field>
			<field name="name" position="before">
				<field name="year" colspan="2" required="1"
					attrs="{'readonly':[('state','!=','draft')]}"
				/>
			</field>

			<field name="date_from" position="attributes">
				<attribute name="readonly">1</attribute>
				<attribute name="force_save">1</attribute>
			</field>

			<field name="date_to" position="attributes">
				<attribute name="readonly">1</attribute>
				<attribute name="force_save">1</attribute>
			</field>
			<xpath expr="/form/sheet" position="before">
				<header>
					<button name="action_draft" string="Reversar" type="object"
						icon="fa-rotate-left"
						attrs="{'invisible':[('state','!=','open')]}"
groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
					/>
					<button name="action_open" string="Aperturar" type="object"
						icon="fa-unlock"
						attrs="{'invisible':[('state','!=','draft')]}"
					groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
					/>
					<button name="action_closed" string="Cerrar" type="object"
						icon="fa-lock"
						attrs="{'invisible':[('state','!=','open')]}"
					groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
					/>

					<field name="state" widget="statusbar" />
				</header>
			</xpath>
			<xpath expr="/form/sheet" position="inside">
				<field name="line_ids" replace="1" force_save="1" nolabel="1" coslpan="4"

				>
					<tree string="Detalle" create="false" delete="false" editable="bottom"
						decoration-info="state=='draft'"
						decoration-success="state=='closed'"
						decoration-danger="state=='open'"
						decoration-warning="state=='in_closing'"
					>
						<field name="year" readonly="1" force_save="1"
							optional="hide" />
						<field name="month_id" readonly="1" force_save="1"
							options="{'no_create':True,'no_open':True,'no_edit':True}" />
						<field name="name" readonly="1" force_save="1"
							optional="hide" />
						<field name="date_from" readonly="1" force_save="1" />
						<field name="date_to" readonly="1" force_save="1" />
						<field name="state" readonly="1" force_save="1"
							optional="hide" />

						<field name="for_account_move" widget="boolean_toggle" optional="hide"
groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							   attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>
						<field name="for_account_payment" widget="boolean_toggle" optional="hide"
groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							   attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>
						<field name="for_stock_move_line" widget="boolean_toggle" optional="hide"
groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							   attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>

						<button name="action_draft" help="Reversar"
							type="object" icon="fa-rotate-left"
								groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							attrs="{'invisible':[('state','!=','open')]}" />
						<button name="action_open" help="Aperturar"
							type="object" icon="fa-unlock"
								groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							attrs="{'invisible':[('state','not in',('draft','in_closing'))]}" />
						<button name="action_in_closing" help="Iniciar Cierre"
							type="object" icon="fa-stop"
								groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							attrs="{'invisible':[('state','!=','open')]}" />
						<button name="action_closed" help="Cerrar" type="object"
							icon="fa-lock"
								groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							attrs="{'invisible':[('state','!=','in_closing')]}" />

<button name="action_in_closing" help="Reversar Cierre"
							type="object" icon="fa-unlock"
groups="fiscal_year.group_apertura,fiscal_year.group_reapertura"
							attrs="{'invisible':[('state','!=','closed')]}"
							/>							
					</tree>
					<form string="Detalle">

							
						<header>
							<field name="state" widget="statusbar" />
						</header>
<sheet>


						<group>
							<group>
								<field name="year" readonly="1" force_save="1" />
								<field name="month_id" readonly="1"
									force_save="1"
									options="{'no_create':True,'no_open':True,'no_edit':True}" />
								<field name="name" readonly="1" force_save="1" />
							</group>
							<group>
								<field name="date_from" readonly="1"
									force_save="1" />
								<field name="date_to" readonly="1"
									force_save="1" />

								<field name="for_account_move" attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>
								<field name="for_stock_move_line"  attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>
								<field name="for_account_payment"  attrs="{'readonly':[('state','!=','in_closing')],'invisible':[('state','!=','in_closing')]}"/>

							</group>
						</group>
</sheet>

						<div class="oe_chatter">
                        <field name="message_follower_ids" groups="base.group_user" options="{'post_refresh': 'recipients'}"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
					</form>


				</field>
			</xpath>

<xpath expr="/form/sheet" position="after">
<div class="oe_chatter">
                        <field name="message_follower_ids" groups="base.group_user" options="{'post_refresh': 'recipients'}"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
</xpath>

		</field>

	</record>



</odoo>