<?xml version="1.0"?>
<odoo>
	<data>

<record id="account_payment_bank_macro_summary_view_search" model="ir.ui.view">
    <field name="name">account.payment.bank.macro.summary.search</field>
    <field name="model">account.payment.bank.macro.summary</field>
    <field name="arch" type="xml">
        <search string="Buscar Pagos a Proveedores">
            <!-- Campos de búsqueda -->
            <field name="company_id"/>
            <field name="name"/>
            <field name="partner_id"/>
            <field name="bank_macro_id" />
            <field name="bank_account_id"/>
            <field name="date_payment"/>
            <field name="ref"/>

            <!-- Filtros -->
            <filter string="Sin Referencia" name="filter_ref_none" domain="[('ref','=',False)]"/>
            <filter string="Con Referencia" name="filter_ref_yes" domain="[('ref','!=',False)]"/>
            <separator/>
            <filter string="Es Multicompañia" name="filter_is_intercompany" domain="[('is_intercompany','=',True)]"/>
            <filter string="No es Multicompañia" name="filter_not_is_intercompany" domain="[('is_intercompany','=',False)]"/>

            <!-- Agrupaciones -->
            <group expand="0" string="Agrupar por">

                <filter string="Compañía" name="group_by_company" context="{'group_by': 'company_id'}"/>
                <filter string="Fecha" name="group_by_date_payment" context="{'group_by': 'date_payment'}"/>

                <filter string="Proveedor" name="group_by_partner" context="{'group_by': 'partner_id'}"/>
                <filter string="Pago al Banco" name="group_by_bank_macro" context="{'group_by': 'bank_macro_id'}"/>
            </group>
        </search>
    </field>
</record>


         <record id="account_payment_bank_macro_summary_view_tree_editable"
            model="ir.ui.view">
        <field name="name">account.payment.bank.macro.summary.tree.editable</field>
        <field name="model">account.payment.bank.macro.summary</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <tree string="Pagos al Banco de Proveedores" edit="true" create="false" delete="false"
                  decoration-muted="not ref" editable="bottom"
                  decoration-success="ref"

               >

                            <field name="name" readonly="1" optional="hide"/>
                             <field name="partner_id"  force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                             <field name="bank_account_id" readonly="1"  options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                  <field name="bank_id"  optional="hide" force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                           <field name="bank_acc_number" optional="hide" force_save="1"    readonly="1"/>
           <field name="bank_tipo_cuenta" optional="hide" force_save="1"    readonly="1"/>
               <field name="tercero" optional="hide" force_save="1"    readonly="1"/>
              <field name="identificacion_tercero" optional="hide" force_save="1"    readonly="1"
              attrs="{'invisible':[('tercero','!=',True)]}"
              />
                                      <field name="nombre_tercero" optional="hide" force_save="1"    readonly="1"
                                      attrs="{'invisible':[('tercero','!=',True)]}"

                                      />
                                      <field name="l10n_latam_identification_tercero_id"
                                             attrs="{'invisible':[('tercero','!=',True)]}"
                                             optional="hide" force_save="1"    readonly="1"/>


                                                         <field name="amount" sum="total" force_save="1"    readonly="1"/>

                                    <field name="ref"  />
                          <field name="comments" readonly="1" />

                 <field name="is_intercompany" optional="hide"/>
                                     <field name="accredited_other_company" optional="hide" />
                                     <field name="intercompany_payment_ref" optional="hide" />


            </tree>
        </field>
    </record>


<record id="action_account_payment_bank_macro_summary_tree_only" model="ir.actions.act_window">
    <field name="name">Pagos al Banco de Proveedores</field>
    <field name="res_model">account.payment.bank.macro.summary</field>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_view_tree_editable"/>
    <field name="target">current</field>
    <field name="context">{'search_default_filter_ref_none':1}</field>
    <field name="domain">[('bank_macro_id.state','=','done')]</field>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            No hay pagos a proveedores para mostrar.
        </p>
    </field>
</record>


          <record id="account_payment_bank_macro_summary_view_report"
            model="ir.ui.view">
        <field name="name">account.payment.bank.macro.summary.tree.editable</field>
        <field name="model">account.payment.bank.macro.summary</field>
        <field name="type">tree</field>
        <field eval="99999" name="priority"/>
        <field name="arch" type="xml">

           <tree string="Resumen" decoration-it="not ref" create="false" delete="false" edit="false">

               <field name="id" optional="hide" />
               <field name="company_id" />
               <field name="partner_id" />
 <field name="bank_macro_id" />
               <field name="date_payment" />
               <field name="name" optional="hide"/>
                                                                       <field name="amount" sum="total" force_save="1" readonly="1"/>

   <field name="bank_account_id" options="{'no_create':True,'no_edit':True,'no_open':True}"/>

                                    <field name="ref" optional="hide"/>
                                    <field name="comments"/>

<button name="%(gps_bancos.action_report_detalle_pago)d"
        type="action"
        help="Imprimir" icon="fa-print"
        context="{'active_ids': [active_id]}"/>



                        </tree>

        </field>
          </record>


                  <record id="account_payment_bank_macro_summary_form_view_bank"
            model="ir.ui.view">
        <field name="name">account.payment.bank.macro.summary.form.tree.bank</field>
        <field name="model">account.payment.bank.macro.summary</field>
        <field name="type">form</field>
        <field eval="99999" name="priority"/>
        <field name="arch" type="xml">

             <form string="Resumen" create="false" delete="false" edit="false">
                 <header>

                     <button string="Acreditar"
        name="create_payment_multicompany"
        type="object" icon="fa-money"
        attrs="{'invisible':['|',('is_intercompany','!=',True),('accredited_other_company','=',True)]}"
 groups="gps_bancos.group_pagar_sol_pagos,gps_bancos.group_admin_sol_pagos,gps_bancos.group_acuerdos_cobros"
        />

                     <button name="%(gps_bancos.action_report_detalle_pago)d"
        type="action"
        string="Imprimir" icon="fa-print"
        context="{'active_ids': [active_id]}"/>



                 </header>
                                          <group>
                                          <group>
                            <field name="name" string="# ID"/>
                                              <field name="bank_macro_id"
                                                     context="{'form_view_ref':'gps_bancos.account_payment_bank_macro_view_form'}"
                                                     groups="gps_bancos.group_pagar_sol_pagos,gps_bancos.group_admin_sol_pagos"
                                                     readonly="1" options="{'no_create':True,'no_edit':True}" />
                             <field name="partner_id"  force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                             <field name="bank_account_id" force_save="1"    readonly="1"  domain="[('partner_id','=',partner_id)]" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                                          </group>
                                              <group>
                  <field name="bank_id"  optional="hide" force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                           <field name="bank_acc_number" optional="hide" force_save="1"    readonly="1"/>
           <field name="bank_tipo_cuenta" optional="hide" force_save="1"    readonly="1"/>

                                                             <field name="tercero" optional="hide" force_save="1"    readonly="1"/>
              <field name="identificacion_tercero" optional="hide" force_save="1"    readonly="1"
              attrs="{'invisible':[('tercero','!=',True)]}"
              />
                                      <field name="nombre_tercero" optional="hide" force_save="1"    readonly="1"
                                      attrs="{'invisible':[('tercero','!=',True)]}"

                                      />
                                      <field name="l10n_latam_identification_tercero_id"
                                             attrs="{'invisible':[('tercero','!=',True)]}"
                                             optional="hide" force_save="1"    readonly="1"/>

                                                         <field name="amount" sum="total" force_save="1"    readonly="1"/>
                                       <field name="ref" readonly="1"/>

                                                                <field name="reversed" optional="hide" />
             <field name="reversed_motive_id" attrs="{'invisible':[('reversed','!=',True)]}" options="{'no_create':True,'no_edit':True,'no_open':True}" />
                <field name="reversed_comments" attrs="{'invisible':[('reversed','!=',True)]}" />
                     <field name="reversed_date" attrs="{'invisible':[('reversed','!=',True)]}" />
      <field name="reversed_ref" attrs="{'invisible':[('reversed','!=',True)]}" />
<field name="type_module" invisible="1"/>


                                                   <field name="is_intercompany" readonly="1" />
                                     <field name="accredited_other_company" attrs="{'invisible':[('is_intercompany','!=',True)]}" />
                                     <field name="intercompany_payment_ref" attrs="{'invisible':[('intercompany_payment_ref','=',None)]}" />

                                          </group>
                                           </group>
<newline/>
                 <notebook>
                     <page string="Solicitudes">
                           <field name="line_ids" readonly="1" force_save="1" colspan="4"
                                                 context="{'form_view_ref':'gps_bancos.account_payment_bank_macro_line_view_form','tree_view_ref':'gps_bancos.account_payment_bank_macro_line_view_tree'}"
                                          />
                 <newline/>
                     </page>
                     <page string="Liquidación" attrs="{'readonly':[('type_module','!=','financial')]}">
                               <field name="detalle_pago_html" colspan="4" nolabel="1"/>
                     </page>
                 </notebook>



                        </form>

        </field>
          </record>




          <record id="account_payment_bank_macro_summary_form_view_report"
            model="ir.ui.view">
        <field name="name">account.payment.bank.macro.summary.form.tree.report</field>
        <field name="model">account.payment.bank.macro.summary</field>
        <field name="type">form</field>
        <field eval="99999" name="priority"/>
        <field name="arch" type="xml">

             <form string="Resumen" create="false" delete="false" edit="false">
                 <header>



                     <button name="%(gps_bancos.action_report_detalle_pago)d"
        type="action"
        string="Imprimir" icon="fa-print"
        context="{'active_ids': [active_id]}"/>



                 </header>
                                          <group>
                                          <group>
                            <field name="name" string="# ID"/>
                                              <field name="bank_macro_id"  readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}" />
                             <field name="partner_id"  force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                             <field name="bank_account_id" force_save="1"    readonly="1"  domain="[('partner_id','=',partner_id)]" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                                          </group>
                                              <group>
                  <field name="bank_id"  optional="hide" force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                           <field name="bank_acc_number" optional="hide" force_save="1"    readonly="1"/>
           <field name="bank_tipo_cuenta" optional="hide" force_save="1"    readonly="1"/>

                                                             <field name="tercero" optional="hide" force_save="1"    readonly="1"/>
              <field name="identificacion_tercero" optional="hide" force_save="1"    readonly="1"
              attrs="{'invisible':[('tercero','!=',True)]}"
              />
                                      <field name="nombre_tercero" optional="hide" force_save="1"    readonly="1"
                                      attrs="{'invisible':[('tercero','!=',True)]}"

                                      />
                                      <field name="l10n_latam_identification_tercero_id"
                                             attrs="{'invisible':[('tercero','!=',True)]}"
                                             optional="hide" force_save="1"    readonly="1"/>

                                                         <field name="amount" sum="total" force_save="1"    readonly="1"/>
                                       <field name="ref" readonly="1"/>

                                                                <field name="reversed" optional="hide" />
             <field name="reversed_motive_id" attrs="{'invisible':[('reversed','!=',True)]}" options="{'no_create':True,'no_edit':True,'no_open':True}" />
                <field name="reversed_comments" attrs="{'invisible':[('reversed','!=',True)]}" />
                     <field name="reversed_date" attrs="{'invisible':[('reversed','!=',True)]}" />
      <field name="reversed_ref" attrs="{'invisible':[('reversed','!=',True)]}" />
<field name="type_module" invisible="1"/>


                                                   <field name="is_intercompany" readonly="1" />
                                     <field name="accredited_other_company" attrs="{'invisible':[('is_intercompany','!=',True)]}" />
                                     <field name="intercompany_payment_ref" attrs="{'invisible':[('intercompany_payment_ref','=',None)]}" />

                                          </group>
                                           </group>
<newline/>
                 <notebook>
                     <page string="Solicitudes">
                           <field name="line_ids" readonly="1" force_save="1" colspan="4"
                                                 context="{'form_view_ref':'gps_bancos.account_payment_bank_macro_line_view_form','tree_view_ref':'gps_bancos.account_payment_bank_macro_line_view_tree'}"
                                          />
                 <newline/>
                     </page>
                     <page string="Liquidación" attrs="{'readonly':[('type_module','!=','financial')]}">
                               <field name="detalle_pago_html" colspan="4" nolabel="1"/>
                     </page>
                 </notebook>



                        </form>

        </field>
          </record>


        <record id="account_payment_bank_macro_summary_view_pivot"
        model="ir.ui.view">
    <field name="name">account.payment.bank.macro.summary.pivot</field>
    <field name="model">account.payment.bank.macro.summary</field>
    <field name="type">pivot</field>
    <field name="priority" eval="100"/>
    <field name="arch" type="xml">
        <pivot string="Resumen Pagos Bancarios" >
            <field name="amount" type="measure"/>
            <field name="company_id" type="row"/>
            <field name="partner_id" type="row"/>
            <field name="bank_macro_id" type="row"/>
            <field name="date_payment" type="col"/>
        </pivot>
    </field>
</record>

   <record id="action_account_payment_bank_macro_summary" model="ir.actions.act_window">
    <field name="name">Resumen de Pagos de Proveedor</field>
    <field name="res_model">account.payment.bank.macro.summary</field>
    <field name="view_mode">tree,form</field>
    <field name="target">current</field>
         <field name="domain">[('bank_macro_id.state','=','done')]</field>
</record>

         <record id="action_account_payment_bank_macro_summary_contratista" model="ir.actions.act_window">
    <field name="name">Resumen de Pagos de Contratista</field>
    <field name="res_model">account.payment.bank.macro.summary</field>
    <field name="view_mode">tree,form</field>
    <field name="target">current</field>
              <field name="domain">[('bank_macro_id.state','=','done'),('contratista','=',True)]</field>
</record>


<record id="account_payment_bank_macro_summary_view_tree_action" model="ir.actions.act_window.view">
    <field name="sequence" eval="1"/>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_view_report"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary"/>
</record>

        <record id="account_payment_bank_macro_summary_view_form_action" model="ir.actions.act_window.view">
    <field name="sequence" eval="2"/>
    <field name="view_mode">form</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_form_view_report"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary"/>
</record>



<record id="account_payment_bank_macro_summary_view_tree_cont_action" model="ir.actions.act_window.view">
    <field name="sequence" eval="1"/>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_view_report"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary_contratista"/>
</record>

        <record id="account_payment_bank_macro_summary_view_form_cont_action" model="ir.actions.act_window.view">
    <field name="sequence" eval="2"/>
    <field name="view_mode">form</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_form_view_report"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary_contratista"/>
</record>



               <record id="account_payment_bank_macro_summary_view_tree_multi"
            model="ir.ui.view">
        <field name="name">account.payment.bank.macro.summary.tree.editable</field>
        <field name="model">account.payment.bank.macro.summary</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <tree string="Pagos al Banco de Proveedores" edit="false" create="false" delete="false"
                  decoration-danger="not accredited_other_company"
                  decoration-success="accredited_other_company"
                   decoration-it="not ref"
               >
   <field name="company_id" />
                 <field name="bank_macro_id" />


               <field name="date_payment" />


                            <field name="name" readonly="1" optional="hide"/>
                             <field name="partner_id"  force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                             <field name="bank_account_id" readonly="1"  options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                  <field name="bank_id"  optional="hide" force_save="1"    readonly="1" options="{'no_create':True,'no_edit':True,'no_open':True}"  />
                           <field name="bank_acc_number" optional="hide" force_save="1"    readonly="1"/>
           <field name="bank_tipo_cuenta" optional="hide" force_save="1"    readonly="1"/>
               <field name="tercero" optional="hide" force_save="1"    readonly="1"/>
              <field name="identificacion_tercero" optional="hide" force_save="1"    readonly="1"
              attrs="{'invisible':[('tercero','!=',True)]}"
              />
                                      <field name="nombre_tercero" optional="hide" force_save="1"    readonly="1"
                                      attrs="{'invisible':[('tercero','!=',True)]}"

                                      />
                                      <field name="l10n_latam_identification_tercero_id"
                                             attrs="{'invisible':[('tercero','!=',True)]}"
                                             optional="hide" force_save="1"    readonly="1"/>


                                                         <field name="amount" sum="total" force_save="1"    readonly="1"/>

                                    <field name="ref"  />
                          <field name="comments" readonly="1" />

                 <field name="is_intercompany" optional="hide"/>
                                     <field name="accredited_other_company" optional="hide"  />
                                     <field name="intercompany_payment_ref" optional="show" />

<button help="Acreditar"  icon="fa-money"
        name="create_payment_multicompany"
        type="object"
        attrs="{'invisible':['|',('is_intercompany','!=',True),('accredited_other_company','=',True)]}"
 groups="gps_bancos.group_pagar_sol_pagos,gps_bancos.group_admin_sol_pagos,gps_bancos.group_acuerdos_cobros"
        />
            </tree>
        </field>
    </record>


            <record id="action_account_payment_bank_macro_summary_multi" model="ir.actions.act_window">
    <field name="name">Pagos Multicompañias</field>
    <field name="res_model">account.payment.bank.macro.summary</field>
    <field name="view_mode">tree,form</field>
    <field name="target">current</field>
              <field name="domain">[('bank_macro_id.state','=','done'),('is_intercompany','=',True),('reversed','!=',True)]</field>
</record>

<record id="action_account_payment_bank_macro_summary_tree_multi" model="ir.actions.act_window.view">
    <field name="sequence" eval="1"/>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_view_tree_multi"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary_multi"/>
</record>

        <record id="action_account_payment_bank_macro_summary_form_multi" model="ir.actions.act_window.view">
    <field name="sequence" eval="2"/>
    <field name="view_mode">form</field>
    <field name="view_id" ref="account_payment_bank_macro_summary_form_view_bank"/>
    <field name="act_window_id" ref="action_account_payment_bank_macro_summary_multi"/>
</record>

    </data>


</odoo>