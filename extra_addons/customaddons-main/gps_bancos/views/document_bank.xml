<?xml version="1.0"?>
<odoo>
	<data>


    <record id="document_bank_view_search"
            model="ir.ui.view">
        <field name="name">document.bank.search</field>
        <field name="model">document.bank</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <search string="Movimientos">

                 <group expand="0" string="Filtrar...">
						<filter string="Preliminar" name="is_draft"
							domain="[('state','=','draft')]" />
                        <filter string="Aprobado" name="is_approved"
							domain="[('state','=','approved')]" />
                        <filter string="Anulado" name="is_cancelled"
							domain="[('state','=','cancelled')]" />

					</group>
					<group expand="0" string="Agrupar por...">
						<filter string="Estados"
							context="{'group_by':'state'}" name='grp_state' />
						<filter string="Compañia"
							context="{'group_by':'company_id'}" name='grp_company_id' />
                         <filter string="Fecha"
							context="{'group_by':'date_process'}" name='grp_date_process' />

					</group>

                <field name="id"/>
                <field name="company_id"/>
                <field name="date_process"/>
            </search>
        </field>
    </record>


    <record id="document_bank_view_tree"
            model="ir.ui.view">
        <field name="name">document.bank.tree</field>
        <field name="model">document.bank</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <tree string="Movimientos">
                <field name="internal_type" invisible="1" />
                <field name="id" string="# ID" optional="hide"/>
                <field name="company_id"/>
                <field name="type" invisible="context.get('default_internal_type','')!='out'" />
                <field name="partner_id"/>
                <field name="date_process"/>
               <field name="date_maturity"/>
               <field name="number_invoice" invisible="context.get('default_internal_type','')!='out'"  />
                        <field name="name"  />

                <field name="total" sum="total"/>
                <field name="total_to_paid" sum="total"/>
                <field name="total_paid" sum="total"/>
                <field name="total_pending" sum="total"/>

                    <field name="state" optional="show" widget="badge"
                       decoration-muted="state=='cancelled'"
                       decoration-info="state=='draft'"
                       decoration-success="state=='posted'"
                />
            </tree>
        </field>
    </record>


    <record id="document_bank_view_form"
            model="ir.ui.view">
        <field name="name">document.bank.form</field>
        <field name="model">document.bank</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <form string="Obligaciones Financieras">
                <header>
<button string="Importar" type="action" attrs="{'invisible':[('state','!=','draft')]}"
        name="%(document_bank_wizard_view_action)d"
        icon="fa-upload" />

                    <button string="Publicar" icon="fa-check" type="object"
                             attrs="{'invisible':[('state','!=','draft')]}"
                            name="action_posted"
                            />

                    <button string="Reversar" icon="fa-rotate-left" type="object"
                             attrs="{'invisible':[('state','!=','posted')]}"
                            name="action_draft"
                            />

                    <button string="Anular" icon="fa-times" type="object"
                             attrs="{'invisible':[('state','!=','draft')]}"
                            name="action_cancel"
                            />

                    <button string="Pagar" icon="fa-money" type="action"
                            name="%(document_bank_wizard_payment_view_action)d"  attrs="{'invisible':[('state','!=','posted')]}"
                            />
                    <field name="state" widget="statusbar"/>
                </header>
                <group>
                    <group>
                        <field name="id" string="# ID" attrs="{'invisible
':[('id','&lt;=',0)]}"/>
                         <field name="type" readonly="1" force_save="1" />
                        <field name="company_id" attrs="{'readonly':[('state','!=','draft')]}"
                               options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>

                        <field name="partner_id" attrs="{'readonly':[('state','!=','draft')]}"
                               options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>

                        <field name="name" attrs="{'readonly':[('state','!=','draft')]}"/>

                         <field name="number_invoice" attrs="{'readonly':[('state','!=','draft')]}"/>
   <field name="date_process" attrs="{'readonly':[('state','!=','draft')]}"/>
                        <field name="date_maturity" force_save="1" readonly="1"/>

                    </group>
                    <group>




                        <field name="amount" readonly="1" force_save="1"/>
                        <field name="percentage_amortize" readonly="1" force_save="1"/>
                        <field name="percentage_interest" readonly="1" force_save="1"/>
 <field name="percentage_interest_quota" readonly="1" force_save="1"/>
     <field name="capital" readonly="1" force_save="1"/>
                         <field name="periods" readonly="1" force_save="1"/>
                         <field name="years" readonly="1" force_save="1"/>

                        <field name="total"/>
                        <field name="total_to_paid"/>
                        <field name="total_paid"/>
                        <field name="total_pending"/>




                    </group>
                </group>
                <newline/>
                <notebook>
                  <page string="Detalle" name="page_detalle">
                        <field name="line_ids" attrs="{'readonly':[('state','!=','draft')]}"
                        context="{'tree_view_ref':'gps_bancos.document_bank_line_view_tree','form_view_ref':'gps_bancos.document_bank_line_view_form'}"
                        >




                        </field>
                  </page>
                </notebook>
                <newline/>
                <field name="comments" placeholder="OBSERVACIONES..." attrs="{'readonly':[('state','!=','draft')]}"/>
            </form>
        </field>
    </record>


    <!--  -->

    <record id="document_bank_view_action"
            model="ir.actions.act_window">
        <field name="name">Emisión de Obligaciones</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">document.bank</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('internal_type','=','out'),('type','=','emision')]</field>
        <field name="context">{'default_internal_type':'out','default_type':'emision'}</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="search_view_id"
               ref="document_bank_view_search"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_tree_action">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="act_window_id"
               ref="document_bank_view_action"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_form_action">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id"
               ref="document_bank_view_form"/>
        <field name="act_window_id"
               ref="document_bank_view_action"/>
    </record>


        <!-- -->

        <record id="document_bank_view_prest_banc_action"
            model="ir.actions.act_window">
        <field name="name">Préstamos Bancarios</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">document.bank</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('internal_type','=','out'),('type','=','prestamo')]</field>
        <field name="context">{'default_internal_type':'out','default_type':'prestamo'}</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="search_view_id"
               ref="document_bank_view_search"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_tree_prest_banc_action">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="act_window_id"
               ref="document_bank_view_prest_banc_action"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_form_prest_banc_action">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id"
               ref="document_bank_view_form"/>
        <field name="act_window_id"
               ref="document_bank_view_prest_banc_action"/>
    </record>


         <record id="document_bank_view_pagares_action"
            model="ir.actions.act_window">
        <field name="name">Pagarés</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">document.bank</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('internal_type','=','out'),('type','=','pagares')]</field>
        <field name="context">{'default_internal_type':'out','default_type':'pagares'}</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="search_view_id"
               ref="document_bank_view_search"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_pagares_banc_action">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="act_window_id"
               ref="document_bank_view_pagares_action"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_form_pagares_action">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id"
               ref="document_bank_view_form"/>
        <field name="act_window_id"
               ref="document_bank_view_pagares_action"/>
    </record>


<!-- -->


        <record id="document_bank_view_in_form"
            model="ir.ui.view">
        <field name="name">document.bank.in.form</field>
        <field name="model">document.bank</field>
        <field name="type">tree</field>
        <field eval="8" name="priority"/>
        <field name="arch" type="xml">
            <form string="Acuerdos de Cobros">
                <header>
<button string="Importar" type="action" attrs="{'invisible':[('state','!=','draft')]}"
        name="%(document_bank_wizard_view_in_action)d"
        icon="fa-upload" />

                    <button string="Publicar" icon="fa-check" type="object"
                             attrs="{'invisible':[('state','!=','draft')]}"
                            name="action_posted"
                            />

                    <button string="Reversar" icon="fa-rotate-left" type="object"
                             attrs="{'invisible':[('state','!=','posted')]}"
                            name="action_draft"
                            />

                    <button string="Anular" icon="fa-times" type="object"
                             attrs="{'invisible':[('state','!=','draft')]}"
                            name="action_cancel"
                            />

                    <button string="Cobrar" icon="fa-money" type="action"
                            name="%(document_bank_wizard_payment_cobros_view_action)d"  attrs="{'invisible':[('state','!=','posted')]}"
                            />


                    <button string="Relacionar a Facturas" icon="fa-file-invoice" type="action"
                            name="%(document_bank_wizard_invoice_view_action)d"  attrs="{'invisible':[('state','!=','posted')]}"
                            />

                    <field name="state" widget="statusbar"/>
                </header>
                <group>
                    <group>
                        <field name="id" string="# ID" attrs="{'invisible
':[('id','&lt;=',0)]}"/>
                         <field name="type" readonly="1" force_save="1" invisible="1" />
                        <field name="company_id" attrs="{'readonly':[('state','!=','draft')]}"
                               options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>

                        <field name="partner_id" attrs="{'readonly':[('state','!=','draft')]}"
                               options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>

                        <field name="name" attrs="{'readonly':[('state','!=','draft')]}"/>

                         <field name="number_invoice" invisible="1" attrs="{'readonly':[('state','!=','draft')]}"/>
   <field name="date_process" attrs="{'readonly':[('state','!=','draft')]}"/>
                        <field name="date_maturity" force_save="1" readonly="1"/>

                    </group>
                    <group>




                        <field name="amount" readonly="1" force_save="1"  invisible="1"/>
                        <field name="percentage_amortize" readonly="1" force_save="1" invisible="1"/>
                        <field name="percentage_interest" readonly="1" force_save="1" invisible="1"/>
 <field name="percentage_interest_quota" readonly="1" force_save="1" invisible="1"/>
     <field name="capital" readonly="1" force_save="1" invisible="1"/>
                         <field name="periods" readonly="1" force_save="1" invisible="1"/>
                         <field name="years" readonly="1" force_save="1" invisible="1"/>

                        <field name="total"/>
                        <field name="total_to_paid"/>
                        <field name="total_paid"/>
                        <field name="total_pending"/>




                    </group>
                </group>
                <newline/>
                <notebook>
                  <page string="Detalle" name="page_detalle">
                        <field name="line_ids" attrs="{'readonly':[('state','!=','draft')]}"
                        context="{'tree_view_ref':'gps_bancos.document_bank_line_view_in_tree','form_view_ref':'gps_bancos.document_bank_line_view_in_form'}"
                        >




                        </field>
                  </page>
                </notebook>
                <newline/>
                <field name="comments" placeholder="OBSERVACIONES..." attrs="{'readonly':[('state','!=','draft')]}"/>
            </form>
        </field>
    </record>

        <!-- -->

        <record id="document_bank_in_view_action"
            model="ir.actions.act_window">
        <field name="name">Ingresos</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">document.bank</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('internal_type','=','in')]</field>
        <field name="context">{'default_internal_type':'in'}</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="search_view_id"
               ref="document_bank_view_search"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_in_tree_action">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id"
               ref="document_bank_view_tree"/>
        <field name="act_window_id"
               ref="document_bank_in_view_action"/>
    </record>

    <record model="ir.actions.act_window.view"
            id="document_bank_view_in_form_action">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id"
               ref="document_bank_view_in_form"/>
        <field name="act_window_id"
               ref="document_bank_in_view_action"/>
    </record>


    </data>


</odoo>