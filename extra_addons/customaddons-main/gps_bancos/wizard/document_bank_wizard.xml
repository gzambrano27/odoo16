<?xml version="1.0"?>
<odoo>
	<data>


		<record
			id="document_bank_wizard_view_form"
			model="ir.ui.view">
			<field name="name">document.bank.wizard.form</field>
			<field name="model">document.bank.wizard</field>
			<field name="type">form</field>
			<field eval="8" name="priority" />
			<field name="arch" type="xml">
				<form string="Asistente de Operaciones Financieras"
					version="16.0">
					<header>

					</header>
					<group colspan="2" cols="1">
						<group>

							<field name="internal_type" invisible="1"
                        />

							<field name="type_action" invisible="1"
                        />
							<field name="type"
								   readonly="context.get('readonly_type',0)"
                        />
									<field name="file_name" invisible="1" colspan="2" />
									<field name="file" colspan="2" filename="file_name"
										attrs="{'required':[('type','=','file')],'invisible':[('type','!=','file')]}" />

							<field name="amount" attrs="{'invisible':[('type','!=','compute')]}"/>
							<field name="years" attrs="{'invisible':[('type','!=','compute')]}"/>
							<field name="percentage_amortize" readonly="1" force_save="1" attrs="{'invisible':[('type','!=','compute')]}"/>

							<field name="percentage_type" attrs="{'invisible':[('type','!=','compute')]}" readonly="1" />
							<field name="percentage_interest" attrs="{'invisible':[('type','!=','compute')]}"/>

														<field name="percentage_interest_quota" attrs="{'invisible':[('type','!=','compute')]}"/>



							<field name="capital" attrs="{'invisible':[('type','!=','compute')]}"/>
							<field name="periods" attrs="{'invisible':[('type','!=','compute')]}"/>

						</group>
						<group>
							<field name="document_bank_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
							<field name="company_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
							<field name="currency_id"  invisible="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>

						</group>
						</group>
					<newline />
					<field name="message"
						   attrs="{'required':[('type','=','text')],'invisible':[('type','!=','text')]}"
                        />
					<footer>
						<button name="process" type="object" string="Procesar"
							icon='fa-cogs' invisible="context.get('default_internal_type','')!='out'"/>
						<button name="process_in" type="object" string="Procesar"
							icon='fa-cogs' invisible="context.get('default_internal_type','')!='in'"/>


						<button special="cancel" name="cancel" string="Salir"
							colspan="2" type="object" icon='fa-times' />
					</footer>
				</form>
			</field>
		</record>


		
		<record
			id="document_bank_wizard_view_action"
			model="ir.actions.act_window">
			<field name="name">Asistente de Operaciones Financieras</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">document.bank.wizard</field>
			<field name="view_mode">form</field>
			<field name="view_id"
				ref="document_bank_wizard_view_form" />
			<field name="target">new</field>
			<field name="context">{'default_type_action':'import','readonly_type':0,'default_internal_type':'out'}</field>
		</record>

		<record
			id="document_bank_wizard_view_in_action"
			model="ir.actions.act_window">
			<field name="name">Asistente de Registro de Cobros Programados</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">document.bank.wizard</field>
			<field name="view_mode">form</field>
			<field name="view_id"
				ref="document_bank_wizard_view_form" />
			<field name="target">new</field>
			<field name="context">{'default_type_action':'import','readonly_type':1,'default_internal_type':'in'}</field>
		</record>

		<!-- -->


			<record
			id="document_bank_wizard_view_payment_form"
			model="ir.ui.view">
			<field name="name">document.bank.wizard.payment.form</field>
			<field name="model">document.bank.wizard</field>
			<field name="type">form</field>
			<field eval="8" name="priority" />
			<field name="arch" type="xml">
				<form string="Asistente de Operaciones Financieras"
					version="16.0">
					<header>

					</header>
					<group colspan="2" cols="1">

						<group>
							<field name="document_bank_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
<field name="payment_amount" />
	<field name="payment_date" />
						</group>
						<group>
					 		<field name="company_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
							<field name="currency_id"  invisible="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
						</group>
					</group>
					<newline/>
					<field name="line_ids"
						   context="{'tree_view_ref':'gps_bancos.document_bank_line_view_tree_payment'}"
						   domain="[('document_id','=',document_bank_id),('total_pending','&gt;',0)]">
							<tree string="Detalle" >

                                  <field name="id" readonly="1" optional="hide"/>
                         <field name="quota" readonly="1"/>
                                <field name="date_process"/>
                             <field name="percentage_amortize" readonly="1" sum="total" optional="hide"/>
                                    <field name="percentage_interest" readonly="1" optional="hide"/>

                                 <field name="payment_capital" sum="total" optional="hide" />
                                 <field name="payment_interest" sum="total" optional="hide"/>



                        <field name="total" sum="total" readonly="1"/>
                        <field name="total_to_paid" sum="total" readonly="1" optional="hide"/>
                        <field name="total_paid" sum="total"  readonly="1"/>
                        <field name="total_pending" sum="total"  readonly="1"/>

                            </tree>
					</field>
					<newline/>
					<footer>
						<button name="process_payment" type="object" string="Procesar"
							icon='fa-cogs' />
						<button special="cancel" name="cancel" string="Salir"
							colspan="2" type="object" icon='fa-times' />
					</footer>
				</form>
			</field>
		</record>



		<record
			id="document_bank_wizard_payment_view_action"
			model="ir.actions.act_window">
			<field name="name">Pagos de Operaciones Financieras</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">document.bank.wizard</field>
			<field name="view_mode">form</field>
			<field name="view_id"
				ref="document_bank_wizard_view_payment_form" />
			<field name="target">new</field>
			<field name="context">{'default_type_action':'process'}</field>
		</record>


		<record
			id="document_bank_wizard_payment_cobros_view_action"
			model="ir.actions.act_window">
			<field name="name">Cobros de Acuerdos de Cobros</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">document.bank.wizard</field>
			<field name="view_mode">form</field>
			<field name="view_id"
				ref="document_bank_wizard_view_payment_form" />
			<field name="target">new</field>
			<field name="context">{'default_type_action':'process'}</field>
		</record>

		<!-- -->


			<record
			id="document_bank_wizard_view_invoiced_form"
			model="ir.ui.view">
			<field name="name">document.bank.wizard.invoiced.form</field>
			<field name="model">document.bank.wizard</field>
			<field name="type">form</field>
			<field eval="8" name="priority" />
			<field name="arch" type="xml">
				<form string="Asistente de Facturacion"
					version="16.0">
					<header>

					</header>
					<group colspan="2" cols="1">

						<group>
							<field name="document_bank_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
					<field name="partner_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
						</group>
						<group>
					 		<field name="company_id"  readonly="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
							<field name="currency_id"  invisible="1" force_save="1" options="{'no_quick_create': True,'no_create': True,'no_create_edit': True,'no_open':True}"/>
						</group>
					</group>
					<newline/>
					<field name="invoice_ids" domain="[('partner_id','=',partner_id),('state','=','posted'),('move_type','=','out_invoice')]">

					</field>
					<newline/>
					<footer>
						<button name="process_invoice" type="object" string="Procesar"
							icon='fa-cogs' />
						<button special="cancel" name="cancel" string="Salir"
							colspan="2" type="object" icon='fa-times' />
					</footer>
				</form>
			</field>
		</record>



		<record
			id="document_bank_wizard_invoice_view_action"
			model="ir.actions.act_window">
			<field name="name">Relacionar a Facturas</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">document.bank.wizard</field>
			<field name="view_mode">form</field>
			<field name="view_id"
				ref="document_bank_wizard_view_invoiced_form" />
			<field name="target">new</field>
			<field name="context">{'default_type_action':'process'}</field>
		</record>


    </data>
    
    
</odoo>