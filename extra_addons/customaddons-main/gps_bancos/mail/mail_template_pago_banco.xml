<?xml version="1.0" ?>
<odoo noupdate="1">


 <record id="mail_template_pago_banco" model="mail.template">
            <field name="name">Notificacion Pagos al Proveedor</field>
            <field name="email_from">{{object.company_id.email}}</field>
            <field name="subject">{{ object.description }}</field>
            <field name="email_to">{{object.get_mail_to_send()}}</field>
            <field name="model_id" ref="model_bank_mail_message"/>
            <field name="auto_delete" eval="False"/>
     <field name="email_cc">compras@gpsgroup.com.ec</field>
           <field name="lang">{{object.company_id.partner_id.lang}}</field>
            <field name="body_html"><![CDATA[
            <p>Estimado/a <strong><t t-out="object.get_object_browse().partner_id.name"/></strong>,</p>

<t t-if="object.get_object_browse().bank_macro_id.default_mode_payment=='bank'">
    <p>Le informamos que se ha realizado un pago a su cuenta bancaria del
       <t t-out="object.get_object_browse().bank_id.name"/> #
       <t t-out="object.get_object_browse().get_hidden_bank_acc_number()"/> con los siguientes detalles:</p>
</t>
<t t-if="object.get_object_browse().bank_macro_id.default_mode_payment!='bank'">
    <p>Le informamos que se ha realizado un pago mediante cheque con los siguientes detalles:</p>
</t>

<ul>
    <li><strong>Fecha:</strong> <t t-out="object.get_object_browse().bank_macro_id.date_request"/></li>
    <li><strong>Importe:</strong> $<t t-out="('%.2f' % object.get_object_browse().amount)"/></li>
    <li><strong>Detalle:</strong> <t t-out="object.get_object_browse().comments or object.get_object_browse().bank_macro_id.comments or ''"/></li>
</ul>

<t t-set="detalles" t-value="list(object.get_object_browse().get_payment_details().values())"/>

<t t-if="detalles">
<table class="table table-sm table-bordered" style="margin-top:16px; border-collapse: collapse; width: 100%;">
    <thead>
        <tr style="background-color: #f0f0f0;">
            <th style="border: 1px solid #ccc; padding: 6px;">Documento</th>
            <th style="border: 1px solid #ccc; padding: 6px;">Referencia</th>
            <th style="border: 1px solid #ccc; padding: 6px; text-align: right;">Total Pagado</th>
            <th style="border: 1px solid #ccc; padding: 6px;">Retenciones</th>
        </tr>
    </thead>
    <tbody>
        <t t-foreach="detalles" t-as="detalle">
            <tr>
                <td><t t-esc="detalle['doc'].name or ''"/></td>
                <td><t t-esc="detalle['doc'].ref or ''"/></td>
                <td style="text-align:right;"><t t-esc="'%.2f' % detalle['total']"/></td>
                <td>
                    <t t-if="detalle['withholds']">
                        <ul style="margin:0; padding-left:16px;">
                            <t t-foreach="detalle['withholds']" t-as="ret">
                                <li><t t-esc="ret.name or ''"/></li>
                            </t>
                        </ul>
                    </t>
                    <t t-if="not detalle['withholds']">
                        -
                    </t>
                </td>
            </tr>
        </t>
    </tbody>
</table>
</t>

<p>Gracias por su confianza.</p>
<p>Atentamente,<br/>El equipo financiero</p>
        ]]></field>
        </record>




</odoo>