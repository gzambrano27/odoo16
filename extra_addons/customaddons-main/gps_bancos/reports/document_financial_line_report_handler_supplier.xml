<?xml version="1.0" encoding="utf-8"?>
<odoo>


      <template id="line_template_financial_report" inherit_id="account_reports.line_template" primary="True">
       <!-- <xpath expr="//span[hasclass('o_account_reports_caret_icon')]" position="before">
            <t t-if="line.get('trust') == 'good'">
                <span class="fa fa-circle color-green trust-partner" role="img" aria-label="Partner ledger is good" title="Partner ledger is good"></span>
            </t>
            <t t-elif="line.get('trust') == 'bad'">
                <span class="fa fa-circle color-red trust-partner" role="img" aria-label="Partner ledger is bad" title="Partner ledger is bad"></span>
            </t>
            <t t-elif="line.get('trust') == 'normal'">
                <span class="fa fa-circle color-transparent trust-partner" role="img" aria-label="Partner ledger is normal" title="Partner ledger is normal"></span>
            </t>
            <t t-else="">
                <span class="fa fa-circle color-transparent trust-partner" role="img"/>
            </t>
        </xpath>-->
        <xpath expr="//span[hasclass('account_report_line_name')]" position="inside">
            <t t-set="parsed_line_id" t-value="report._parse_line_id(line.get('id'))[-1]"/>
            <t t-if="parsed_line_id[1] == 'document.financial' and line.get('unfoldable')">
                <t t-if="parsed_line_id[2] is not None">
                    &amp;nbsp;<a t-att-data-id="line.get('id')" action="action_open_main" class="no_print oe_link_reports">Abrir</a>
                </t>
            </t>
        </xpath>
    </template>

    <record id="document_financial_line_report" model="account.report">
            <field name="name">Operaciones Financieras &amp; Vencidos por Pagar</field>
            <field name="filter_multi_company">selector</field>
            <field name="filter_fiscal_position" eval="0"/>
            <field name="filter_partner" eval="0"/>
            <field name="filter_growth_comparison" eval="0"/>
            <field name="filter_show_draft" eval="0"/>
            <field name="filter_date_range" eval="0"/>
            <field name="filter_period_comparison" eval="0"/>
            <field name="default_opening_date_filter">today</field>
            <field name="only_tax_exigible" eval="False"/>
        <field name="main_model_name" />
        <field name="mail_model_name" />
            <field name="custom_handler_model_id" ref="model_document_financial_line_report_handler"/>
<field name="line_template">gps_bancos.line_template_financial_report</field>
            <field name="column_ids">

                <record id="document_financial_line_quota" model="account.report.column">
                <field name="name">Cuota</field>
                <field name="expression_label">quota</field>
                <field name="figure_type">integer</field>
            </record>

            <record id="document_financial_line_date_due" model="account.report.column">
                <field name="name">Fecha de Vencimiento</field>
                <field name="expression_label">date_due</field>
                <field name="figure_type">date</field>
            </record>
            <record id="document_financial_line_period0" model="account.report.column">
                <field name="name">En fecha</field>
                <field name="expression_label">period0</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_period1" model="account.report.column">
                <field name="name">1-30</field>
                <field name="expression_label">period1</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_period2" model="account.report.column">
                <field name="name">31-60</field>
                <field name="expression_label">period2</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_period3" model="account.report.column">
                <field name="name">61-90</field>
                <field name="expression_label">period3</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_period4" model="account.report.column">
                <field name="name">91-120</field>
                <field name="expression_label">period4</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_period5" model="account.report.column">
                <field name="name">Más antiguos</field>
                <field name="expression_label">period5</field>
                <field name="sortable" eval="True"/>
            </record>
            <record id="document_financial_line_total" model="account.report.column">
                <field name="name">Total</field>
                <field name="expression_label">total</field>
                <field name="sortable" eval="True"/>
            </record>
        </field>

        <field name="line_ids">



            <record id="document_financial_line_emision_obli" model="account.report.line">
                <field name="name">Emisión de Obligaciones</field>
                <field name="groupby">partner_id,document_id,id</field>
                <field name="sequence">1</field>
                <field name="mail_model_name">document.financial.line</field>
                 <field name="main_model_name">document.financial.line</field>
                <field name="expression_ids">

                    <record id="document_financial_line_emi_quota" model="account.report.expression">
                        <field name="label">quota</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">quota</field>
                    </record>

                    <record id="document_financial_line_emi_date_due" model="account.report.expression">
                        <field name="label">date_due</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">date_due</field>
                    </record>

                    <record id="document_financial_line_emi_period0" model="account.report.expression">
                        <field name="label">period0</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period0</field>
                    </record>
                    <record id="document_financial_line_emi_period1" model="account.report.expression">
                        <field name="label">period1</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period1</field>
                    </record>
                    <record id="document_financial_line_emi_period2" model="account.report.expression">
                        <field name="label">period2</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period2</field>
                    </record>
                    <record id="document_financial_line_emi_period3" model="account.report.expression">
                        <field name="label">period3</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period3</field>
                    </record>
                    <record id="document_financial_line_emi_period4" model="account.report.expression">
                        <field name="label">period4</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period4</field>
                    </record>
                    <record id="document_financial_line_emi_period5" model="account.report.expression">
                        <field name="label">period5</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">period5</field>
                    </record>
                    <record id="document_financial_line_emi_total" model="account.report.expression">
                        <field name="label">total</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_emision_aged</field>
                        <field name="subformula">total</field>
                    </record>
                </field>
                <!---->
            </record>
                 <record id="document_financial_line_obli_banc" model="account.report.line">
                <field name="name">Obligaciones Bancarias</field>
                <field name="groupby">partner_id,document_id,id</field>
                       <field name="sequence">2</field>
                <field name="mail_model_name">document.financial.line</field>
                        <field name="main_model_name">document.financial.line</field>
                <field name="expression_ids">

                    <record id="document_financial_line_obli_quota" model="account.report.expression">
                        <field name="label">quota</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">quota</field>
                    </record>

                    <record id="document_financial_line_obli_date_due" model="account.report.expression">
                        <field name="label">date_due</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">date_due</field>
                    </record>

                    <record id="document_financial_line_obli_banc_period0" model="account.report.expression">
                        <field name="label">period0</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period0</field>
                    </record>
                    <record id="document_financial_line_obli_banc_period1" model="account.report.expression">
                        <field name="label">period1</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period1</field>
                    </record>
                    <record id="document_financial_line_obli_banc_period2" model="account.report.expression">
                        <field name="label">period2</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period2</field>
                    </record>
                    <record id="document_financial_line_obli_banc_period3" model="account.report.expression">
                        <field name="label">period3</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period3</field>
                    </record>
                    <record id="document_financial_line_obli_banc_period4" model="account.report.expression">
                        <field name="label">period4</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period4</field>
                    </record>
                    <record id="document_financial_line_obli_banc_period5" model="account.report.expression">
                        <field name="label">period5</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">period5</field>
                    </record>
                    <record id="document_financial_line_obli_banc_total" model="account.report.expression">
                        <field name="label">total</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_prestamo_aged</field>
                        <field name="subformula">total</field>
                    </record>
                </field>

            </record>

      <record id="document_financial_move_line" model="account.report.line">
                <field name="name">Vencido por Pagar</field>
                <field name="groupby">partner_id,id</field>
            <field name="sequence">3</field>
                <field name="mail_model_name">account.move.line</field>
             <field name="main_model_name">account.move.line</field>
                <field name="expression_ids">

                    <record id="document_financial_move_line_quota" model="account.report.expression">
                        <field name="label">quota</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">quota</field>
                    </record>

                    <record id="document_financial_move_line_date_due" model="account.report.expression">
                        <field name="label">date_due</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">date_due</field>
                    </record>

                    <record id="document_financial_move_line_period0" model="account.report.expression">
                        <field name="label">period0</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period0</field>
                    </record>
                    <record id="document_financial_move_line_period1" model="account.report.expression">
                        <field name="label">period1</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period1</field>
                    </record>
                    <record id="document_financial_move_line_period2" model="account.report.expression">
                        <field name="label">period2</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period2</field>
                    </record>
                    <record id="document_financial_move_line_period3" model="account.report.expression">
                        <field name="label">period3</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period3</field>
                    </record>
                    <record id="document_financial_move_line_period4" model="account.report.expression">
                        <field name="label">period4</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period4</field>
                    </record>
                    <record id="document_financial_move_line_period5" model="account.report.expression">
                        <field name="label">period5</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">period5</field>
                    </record>
                    <record id="document_financial_move_line_total" model="account.report.expression">
                        <field name="label">total</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_cxp_aged</field>
                        <field name="subformula">total</field>
                    </record>
                </field>

            </record>

 <record id="document_financial_line_group_total" model="account.report.line">
                <field name="name">Total</field>
                <field name="mail_model_name">document.financial.line</field>
             <field name="main_model_name">document.financial.line</field>
       <field name="sequence">4</field>
                <field name="expression_ids">


                    <record id="document_financial_line_group_total_period0" model="account.report.expression">
                        <field name="label">period0</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period0</field>
                    </record>
                    <record id="document_financial_line_group_total_period1" model="account.report.expression">
                        <field name="label">period1</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period1</field>
                    </record>
                    <record id="document_financial_line_group_total_period2" model="account.report.expression">
                        <field name="label">period2</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period2</field>
                    </record>
                    <record id="document_financial_line_group_total_period3" model="account.report.expression">
                        <field name="label">period3</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period3</field>
                    </record>
                    <record id="document_financial_line_group_total_period4" model="account.report.expression">
                        <field name="label">period4</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period4</field>
                    </record>
                    <record id="document_financial_line_group_total_period5" model="account.report.expression">
                        <field name="label">period5</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">period5</field>
                    </record>
                    <record id="document_financial_line_group_total_total" model="account.report.expression">
                        <field name="label">total</field>
                        <field name="engine">custom</field>
                        <field name="formula">_report_custom_engine_aged</field>
                        <field name="subformula">total</field>
                    </record>
                </field>

            </record>


        </field>


        </record>

     <record id="action_document_financial_line_report" model="ir.actions.client">
            <field name="name">Operaciones Financieras &amp; Vencidos por Pagar</field>
            <field name="tag">account_report</field>
            <field name="context" eval="{'report_id': ref('gps_bancos.document_financial_line_report')}"/>
        </record>


    <!--        totales        -->








</odoo>