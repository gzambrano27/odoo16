<odoo>
	<data>
        <record id="report_docs_format_inform" model="report.paperformat">
            <field name="name">Formato Informe Ingreso/Salida</field>
            <field name="default" eval="True" />
            <field name="format">A4</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">7</field>
            <field name="margin_bottom">5</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">10</field>
        </record>

        <record id="report_inform" model="ir.actions.report">
            <field name="name">Informe Ingreso/Salida</field>
            <field name="model">stock.picking</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">gps_inventario.informe_in_out</field>
            <field name="report_file">gps_inventario.informe_in_out</field>
            <field name="binding_model_id" ref="stock.model_stock_picking" />
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="report_docs_format_inform" />
            <field name="print_report_name">"Informe - " + object.name</field>
        </record>

		<template id="informe_in_out">
			<t t-call="web.basic_layout">
				<t t-foreach="docs" t-as="o">
					<div class="page" style="font-family: Verdana; font-size: 17px;">
						<div class="row" style="align-items: center;">
							<div class="col-3 text-center">
								<div>
									<img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 100px; max-width: 100%;" />
								</div>
							</div>
							<div class="col-9 text-center">
								<t t-if="o.picking_type_id.code == 'incoming'">
									<div><strong><h1>CONTROL DE INGRESO DE MATERIALES</h1></strong></div>
								</t>
								<t t-elif="o.picking_type_id.code == 'outgoing'">
									<div><strong><h1>CONTROL DE SALIDA DE MATERIALES</h1></strong></div>
								</t>
								<t t-else="">
									<div><strong><h1>CONTROL DE MATERIALES</h1></strong></div>
								</t>
							</div>
						</div>
						<div class="row">
							<div class="col-9 mt-5">
								<div>
									<strong><span>Bodega:</span></strong> <span t-field="o.location_id.name"/>
								</div>
								<div>
									<strong><span>Proyecto:</span></strong> <span t-field="o.analytic_account_names"/>
								</div>
								<div>
									<strong><span>Solicitante:</span></strong> <span t-field="o.user_id.name"/>
								</div>
								<div>
									<strong><span>Fecha:</span></strong> <span t-field="o.date_done"/>
								</div>
							</div>
							<div class="col-3">
								<t t-if="o.picking_type_id.code == 'incoming'">
									<div class="row">
										<div class="col-6"><strong>Ingreso</strong></div>
										<div class="col-6">
											<img t-att-src="'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTIwLjI4NSA2LjcwN2wtMTEuMDEgMTEuMDEtNS42NTctNS42NTcgMS40MTQtMS40MTQgNC4yNDMgNC4yNDMgOS41OTctOS41OTd6IiBmaWxsPSIjMDAwIi8+PC9zdmc+'" alt="Check" style="max-height: 20px;"/>
										</div>
									</div>
									<div class="row">
										<div class="col-6"><strong>Salida</strong></div>
										<div class="col-6"></div>
									</div>
								</t>
								<t t-if="o.picking_type_id.code == 'outgoing'">
									<div class="row">
										<div class="col-6"><strong>Ingreso</strong></div>
										<div class="col-6"></div>
									</div>
									<div class="row">
										<div class="col-6"><strong>Salida</strong></div>
										<div class="col-6">
											<img t-att-src="'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTIwLjI4NSA2LjcwN2wtMTEuMDEgMTEuMDEtNS42NTctNS42NTcgMS40MTQtMS40MTQgNC4yNDMgNC4yNDMgOS41OTctOS41OTd6IiBmaWxsPSIjMDAwIi8+PC9zdmc+'" alt="Check" style="max-height: 20px;"/>
										</div>
									</div>
								</t>
								<t t-if="o.picking_type_id.code == ''"></t>
							</div>
						</div>
						<br/>
						<h1 t-field="o.name" class="mt0"/>
						<table class="table table-sm" t-if="o.move_line_ids and o.move_ids_without_package">
							<t t-set="has_barcode" t-value="any(move_line.product_id and move_line.product_id.sudo().barcode or move_line.package_id for move_line in o.move_line_ids)"/>
							<thead>
								<tr>
									<th name="th_product">
										<strong>DESCRIPCIÓN</strong>
									</th>
									<th colspan="2" name="th_qty">
										<strong>CANTIDAD</strong>
									</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<!-- In case you come across duplicated lines, ask NIM or LAP -->
								<t t-foreach="o.move_line_ids_without_package.sorted(lambda ml: (ml.location_id.complete_name, ml.location_dest_id.complete_name))" t-as="ml">
									<tr>
										<td class="text-left">
											<span t-field="ml.product_id.display_name"/><br/>
											<span t-field="ml.product_id.description_picking"/>
										</td>
										<td class="text-right">
											<span t-if="o.state != 'done'" t-field="ml.reserved_uom_qty"/>
											<span t-if="o.state == 'done'" t-field="ml.qty_done"/>
										</td>
										<td class="text-left">
											<span t-field="ml.product_uom_id" groups="uom.group_uom"/>
										</td>
									</tr>
								</t>
							  </tbody>
						</table>
						<p t-field="o.note"/>
						<div class="row">
							<div class="col-4 text-center">
								<span>.....................................</span><br/>
								<strong><span>Entrega conforme</span></strong><br/>
								<strong><span t-field="o.user_id.name"/></strong><br/>
							</div>
							<div class="col-4 text-center">
								<span>.....................................</span><br/>
								<strong><span>Intendente/Supervisor</span></strong><br/>
								<strong><span t-field="o.supervisor_id.name"/></strong><br/>
							</div>
							<div class="col-4 text-center">
								<span>.....................................</span><br/>
								<strong><span>Recibí conforme</span></strong><br/>
								<strong><span t-field="o.recibido_por.name"/></strong><br/>
							</div>
						</div>
					</div>
				</t>
			</t>
		</template>
	</data>
</odoo>